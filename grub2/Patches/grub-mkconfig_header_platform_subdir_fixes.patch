diff --git a/util/grub.d/00_header.in b/util/grub.d/00_header.in
index d9bcc15..82d2602 100644
--- a/util/grub.d/00_header.in
+++ b/util/grub.d/00_header.in
@@ -85,10 +85,21 @@ EOF
 else
     # Insert all available backends; GRUB will use the most appropriate.
     have_video=0;
-    for backend in $(cat "${GRUB_PREFIX}/video.lst"); do
-	have_video=1;
-	cat <<EOF
-  insmod ${backend}
+    for modinfo in $(ls "${GRUB_PREFIX}"/*/modinfo.sh) ; do
+        . "${modinfo}"
+        cat <<EOF
+  if [ "\${grub_platform}" == "${grub_modinfo_platform}" ]; then
+EOF
+        video_lst="$(echo ${modinfo} | sed 's|modinfo.sh||g')/video.lst"
+        for backend in $(cat "${video_lst}"); do
+            have_video=1;
+            cat <<EOF
+    insmod ${backend}
+EOF
+        done
+    cat <<EOF
+  fi
+  
 EOF
     done
     if [ x$have_video = x0 ]; then
